{"ast":null,"code":"var _jsxFileName = \"F:\\\\kelany\\\\src\\\\pages\\\\RoomTypes.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { supabase } from '../supabaseClient';\nimport RoomTypeCard from '../components/RoomTypeCard';\nimport RoomTypeModal from '../components/RoomTypeModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function RoomTypes() {\n  _s();\n  const [types, setTypes] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showModal, setShowModal] = useState(false);\n  const [editing, setEditing] = useState(null);\n  const load = async () => {\n    setLoading(true);\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('room_types_active').select('*');\n      if (error) throw error;\n      setTypes(data || []);\n    } catch (e) {\n      console.error('Failed loading room types', e);\n      setTypes([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    load();\n  }, []);\n  const handleCreate = () => {\n    setEditing(null);\n    setShowModal(true);\n  };\n  const handleEdit = rt => {\n    setEditing(rt);\n    setShowModal(true);\n  };\n  const handleSave = async payload => {\n    try {\n      var _payload$code, _payload$name, _payload$name_ar, _payload$description;\n      const cleaned = {\n        code: ((_payload$code = payload.code) === null || _payload$code === void 0 ? void 0 : _payload$code.trim()) || null,\n        name: ((_payload$name = payload.name) === null || _payload$name === void 0 ? void 0 : _payload$name.trim()) || null,\n        name_ar: ((_payload$name_ar = payload.name_ar) === null || _payload$name_ar === void 0 ? void 0 : _payload$name_ar.trim()) || null,\n        base_price: Number(payload.base_price || 0),\n        max_guests: Number(payload.max_guests || 1),\n        features: Array.isArray(payload.features) ? payload.features : (payload.features || '').split(',').map(s => s.trim()).filter(Boolean),\n        description: ((_payload$description = payload.description) === null || _payload$description === void 0 ? void 0 : _payload$description.trim()) || null,\n        display_order: payload.display_order != null && payload.display_order !== '' ? Number(payload.display_order) : null,\n        is_active: payload.is_active !== undefined ? !!payload.is_active : true\n      };\n      if (editing && editing.id) {\n        const {\n          error\n        } = await supabase.from('room_types').update(cleaned).eq('id', editing.id);\n        if (error) throw error;\n      } else {\n        const {\n          error\n        } = await supabase.from('room_types').insert([cleaned]);\n        if (error) throw error;\n      }\n      setShowModal(false);\n      load();\n    } catch (e) {\n      console.error('Failed saving room type', e);\n      window.alert('حصل خطأ أثناء حفظ نوع الغرفة: ' + (e.message || e));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-8\",\n    dir: \"rtl\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold\",\n          children: \"\\u0623\\u0646\\u0648\\u0627\\u0639 \\u0627\\u0644\\u063A\\u0631\\u0641\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-500\",\n          children: \"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0623\\u0646\\u0648\\u0627\\u0639 \\u0648\\u062A\\u0635\\u0646\\u064A\\u0641\\u0627\\u062A \\u0627\\u0644\\u063A\\u0631\\u0641 \\u0648\\u0627\\u0644\\u0623\\u0633\\u0639\\u0627\\u0631\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleCreate,\n        className: \"bg-blue-600 text-white px-4 py-2 rounded\",\n        children: \"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0646\\u0648\\u0639 \\u062C\\u062F\\u064A\\u062F +\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"\\u062A\\u062D\\u0645\\u064A\\u0644...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }, this) : types.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-6 bg-white rounded shadow\",\n      children: \"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0623\\u0646\\u0648\\u0627\\u0639 \\u063A\\u0631\\u0641 \\u0628\\u0639\\u062F. \\u0627\\u0636\\u063A\\u0637 \\\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0646\\u0648\\u0639 \\u062C\\u062F\\u064A\\u062F\\\" \\u0644\\u0625\\u0646\\u0634\\u0627\\u0621 \\u0623\\u0648\\u0644 \\u0646\\u0648\\u0639.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-3 gap-6\",\n      children: types.map(t => /*#__PURE__*/_jsxDEV(RoomTypeCard, {\n        type: t,\n        onEdit: () => handleEdit(t)\n      }, t.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }, this), showModal && /*#__PURE__*/_jsxDEV(RoomTypeModal, {\n      initialData: editing,\n      onClose: () => setShowModal(false),\n      onSave: handleSave\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n}\n_s(RoomTypes, \"PERtomo4wk3Dhpap4nb6YLjs7ng=\");\n_c = RoomTypes;\nvar _c;\n$RefreshReg$(_c, \"RoomTypes\");","map":{"version":3,"names":["React","useEffect","useState","supabase","RoomTypeCard","RoomTypeModal","jsxDEV","_jsxDEV","RoomTypes","_s","types","setTypes","loading","setLoading","showModal","setShowModal","editing","setEditing","load","data","error","from","select","e","console","handleCreate","handleEdit","rt","handleSave","payload","_payload$code","_payload$name","_payload$name_ar","_payload$description","cleaned","code","trim","name","name_ar","base_price","Number","max_guests","features","Array","isArray","split","map","s","filter","Boolean","description","display_order","is_active","undefined","id","update","eq","insert","window","alert","message","className","dir","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","length","t","type","onEdit","initialData","onClose","onSave","_c","$RefreshReg$"],"sources":["F:/kelany/src/pages/RoomTypes.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { supabase } from '../supabaseClient';\r\nimport RoomTypeCard from '../components/RoomTypeCard';\r\nimport RoomTypeModal from '../components/RoomTypeModal';\r\n\r\nexport default function RoomTypes() {\r\n  const [types, setTypes] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [editing, setEditing] = useState(null);\r\n\r\n  const load = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('room_types_active')\r\n        .select('*');\r\n      if (error) throw error;\r\n      setTypes(data || []);\r\n    } catch (e) {\r\n      console.error('Failed loading room types', e);\r\n      setTypes([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    load();\r\n  }, []);\r\n\r\n  const handleCreate = () => { setEditing(null); setShowModal(true); };\r\n  const handleEdit = (rt) => { setEditing(rt); setShowModal(true); };\r\n\r\n  const handleSave = async (payload) => {\r\n    try {\r\n      const cleaned = {\r\n        code: payload.code?.trim() || null,\r\n        name: payload.name?.trim() || null,\r\n        name_ar: payload.name_ar?.trim() || null,\r\n        base_price: Number(payload.base_price || 0),\r\n        max_guests: Number(payload.max_guests || 1),\r\n        features: Array.isArray(payload.features) ? payload.features : (payload.features || '').split(',').map(s=>s.trim()).filter(Boolean),\r\n        description: payload.description?.trim() || null,\r\n        display_order: payload.display_order != null && payload.display_order !== '' ? Number(payload.display_order) : null,\r\n        is_active: payload.is_active !== undefined ? !!payload.is_active : true,\r\n      };\r\n\r\n      if (editing && editing.id) {\r\n        const { error } = await supabase.from('room_types').update(cleaned).eq('id', editing.id);\r\n        if (error) throw error;\r\n      } else {\r\n        const { error } = await supabase.from('room_types').insert([cleaned]);\r\n        if (error) throw error;\r\n      }\r\n      setShowModal(false);\r\n      load();\r\n    } catch (e) {\r\n      console.error('Failed saving room type', e);\r\n      window.alert('حصل خطأ أثناء حفظ نوع الغرفة: ' + (e.message || e));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-8\" dir=\"rtl\">\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold\">أنواع الغرف</h2>\r\n          <p className=\"text-sm text-gray-500\">إدارة الأنواع وتصنيفات الغرف والأسعار</p>\r\n        </div>\r\n        <button onClick={handleCreate} className=\"bg-blue-600 text-white px-4 py-2 rounded\">إضافة نوع جديد +</button>\r\n      </div>\r\n\r\n      {loading ? (\r\n        <div>تحميل...</div>\r\n      ) : types.length === 0 ? (\r\n        <div className=\"p-6 bg-white rounded shadow\">لا توجد أنواع غرف بعد. اضغط \"إضافة نوع جديد\" لإنشاء أول نوع.</div>\r\n      ) : (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n          {types.map(t => (\r\n            <RoomTypeCard key={t.id} type={t} onEdit={() => handleEdit(t)} />\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {showModal && (\r\n        <RoomTypeModal initialData={editing} onClose={() => setShowModal(false)} onSave={handleSave} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}