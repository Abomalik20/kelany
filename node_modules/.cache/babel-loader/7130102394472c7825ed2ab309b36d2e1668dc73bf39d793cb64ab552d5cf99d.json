{"ast":null,"code":"var _jsxFileName = \"F:\\\\kelany\\\\src\\\\components\\\\CashboxModal.jsx\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from 'react';\nimport { supabase } from '../supabaseClient';\nimport { AuthContext } from '../App.jsx';\nimport { isManager } from '../utils/permissions.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function CashboxModal({\n  onClose,\n  onDone\n}) {\n  _s();\n  const currentUser = useContext(AuthContext);\n  const [balance, setBalance] = useState(0);\n  const [operation, setOperation] = useState('deposit'); // deposit | withdraw\n  const [amount, setAmount] = useState('');\n  const [description, setDescription] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [wallets, setWallets] = useState({\n    cash: 0,\n    instapay: 0,\n    ecash: 0\n  });\n  const [pendingCount, setPendingCount] = useState(0);\n  const [confirmedCount, setConfirmedCount] = useState(0);\n  const [lastTransfer, setLastTransfer] = useState(null);\n  const [transferFrom, setTransferFrom] = useState('cash');\n  const [transferTo, setTransferTo] = useState('instapay');\n  const [transferAmount, setTransferAmount] = useState('');\n  const [transferNote, setTransferNote] = useState('');\n  const [transferLoading, setTransferLoading] = useState(false);\n  const canTransfer = isManager(currentUser);\n  const loadDashboard = async () => {\n    try {\n      const {\n        data: walletTx,\n        error: walletError\n      } = await supabase.from('accounting_transactions').select('direction,amount,payment_method,status').in('payment_method', ['cash', 'instapay', 'vodafone_cash', 'etisalat_cash', 'other']);\n      if (walletError) throw walletError;\n      let cash = 0;\n      let instapay = 0;\n      let ecash = 0;\n      let pending = 0;\n      let confirmed = 0;\n      (walletTx || []).forEach(row => {\n        const amt = Number(row.amount || 0);\n        if (!amt) return;\n        const signed = row.direction === 'income' ? amt : -amt;\n        if (row.payment_method === 'cash') cash += signed;else if (row.payment_method === 'instapay') instapay += signed;else ecash += signed;\n        if (row.status === 'pending') pending += 1;else if (row.status === 'confirmed') confirmed += 1;\n      });\n      setWallets({\n        cash,\n        instapay,\n        ecash\n      });\n      setBalance(cash);\n      setPendingCount(pending);\n      setConfirmedCount(confirmed);\n      const {\n        data: lastTx,\n        error: lastError\n      } = await supabase.from('accounting_transactions').select('id,tx_date,description,created_at').eq('source_type', 'transfer').order('created_at', {\n        ascending: false\n      }).limit(1).maybeSingle();\n      if (lastError && lastError.code !== 'PGRST116') throw lastError;\n      setLastTransfer(lastTx || null);\n    } catch (e) {\n      console.error('load cashbox dashboard error', e);\n    }\n  };\n  useEffect(() => {\n    loadDashboard();\n  }, []);\n  const handleSubmit = async () => {\n    const amt = Number(amount || 0);\n    if (!amt || amt <= 0) {\n      alert('من فضلك أدخل مبلغًا صالحًا');\n      return;\n    }\n    setLoading(true);\n    try {\n      const direction = operation === 'deposit' ? 'income' : 'expense';\n      let categoryId = null;\n      try {\n        const targetName = direction === 'income' ? 'إيرادات أخرى' : 'مصروفات أخرى';\n        const {\n          data: cats\n        } = await supabase.from('accounting_categories').select('id,name,type').eq('type', direction === 'income' ? 'income' : 'expense').eq('name', targetName).limit(1);\n        if (cats && cats.length > 0) {\n          categoryId = cats[0].id;\n        }\n      } catch (_) {}\n      const payload = {\n        tx_date: new Date().toISOString().slice(0, 10),\n        direction,\n        category_id: categoryId,\n        amount: amt,\n        payment_method: 'cash',\n        bank_account_id: null,\n        source_type: 'manual',\n        reservation_id: null,\n        description: description || (operation === 'deposit' ? 'عملية إيداع في الخزنة' : 'عملية سحب من الخزنة'),\n        status: 'confirmed'\n      };\n      if (currentUser && currentUser.id) {\n        payload.created_by = currentUser.id;\n      }\n      const {\n        error\n      } = await supabase.from('accounting_transactions').insert(payload);\n      if (error) throw error;\n      await loadDashboard();\n      onDone && onDone();\n    } catch (e) {\n      console.error('cashbox submit error', e);\n      alert('تعذر حفظ عملية الخزنة: ' + (e.message || e));\n    } finally {\n      setLoading(false);\n    }\n  };\n  const walletLabel = key => {\n    if (key === 'cash') return 'نقدي (خزنة)';\n    if (key === 'instapay') return 'إنستاباي';\n    return 'كاش إلكتروني';\n  };\n  const walletToPaymentMethod = key => {\n    if (key === 'cash') return 'cash';\n    if (key === 'instapay') return 'instapay';\n    return 'other';\n  };\n  const handleTransfer = async () => {\n    const amt = Number(transferAmount || 0);\n    if (!canTransfer) {\n      alert('فقط المدير يمكنه تنفيذ تحويلات الأرصدة.');\n      return;\n    }\n    if (!amt || amt <= 0) {\n      alert('من فضلك أدخل مبلغ تحويل صالحاً');\n      return;\n    }\n    if (transferFrom === transferTo) {\n      alert('من فضلك اختر محفظتين مختلفتين (من / إلى).');\n      return;\n    }\n    setTransferLoading(true);\n    try {\n      const txDate = new Date().toISOString().slice(0, 10);\n      const descBase = `تحويل داخلي من ${walletLabel(transferFrom)} إلى ${walletLabel(transferTo)}`;\n      const fullDesc = transferNote ? `${descBase} - ${transferNote}` : descBase;\n      const fromPm = walletToPaymentMethod(transferFrom);\n      const toPm = walletToPaymentMethod(transferTo);\n      const common = {\n        tx_date: txDate,\n        category_id: null,\n        bank_account_id: null,\n        source_type: 'transfer',\n        reservation_id: null,\n        description: fullDesc,\n        status: 'confirmed'\n      };\n      if (currentUser && currentUser.id) {\n        common.created_by = currentUser.id;\n      }\n      const rows = [{\n        ...common,\n        direction: 'expense',\n        amount: amt,\n        payment_method: fromPm\n      }, {\n        ...common,\n        direction: 'income',\n        amount: amt,\n        payment_method: toPm\n      }];\n      const {\n        error\n      } = await supabase.from('accounting_transactions').insert(rows);\n      if (error) throw error;\n      setTransferAmount('');\n      setTransferNote('');\n      await loadDashboard();\n      onDone && onDone();\n    } catch (e) {\n      console.error('wallet transfer error', e);\n      alert('تعذّر تنفيذ عملية التحويل: ' + (e.message || e));\n    } finally {\n      setTransferLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black/40 flex items-center justify-center p-2 sm:p-4\",\n    dir: \"rtl\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white w-full max-w-3xl max-h-[90vh] rounded-xl shadow-lg overflow-hidden flex flex-col\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"px-4 py-3 border-b bg-amber-50 flex items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"font-bold text-amber-900\",\n            children: \"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u062E\\u0632\\u0646\\u0629 \\u0648\\u0627\\u0644\\u0645\\u062D\\u0627\\u0641\\u0638\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs text-amber-700\",\n            children: \"\\u0639\\u0631\\u0636 \\u0623\\u0631\\u0635\\u062F\\u0629 \\u0627\\u0644\\u0643\\u0627\\u0634 \\u0648 Instapay \\u0648\\u0627\\u0644\\u0643\\u0627\\u0634 \\u0627\\u0644\\u0625\\u0644\\u0643\\u062A\\u0631\\u0648\\u0646\\u064A\\u060C \\u0648\\u062A\\u0633\\u062C\\u064A\\u0644 \\u0625\\u064A\\u062F\\u0627\\u0639/\\u0633\\u062D\\u0628 \\u0648\\u062A\\u062D\\u0648\\u064A\\u0644\\u0627\\u062A \\u062F\\u0627\\u062E\\u0644\\u064A\\u0629\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"text-sm text-gray-500\",\n          onClick: onClose,\n          children: \"\\u0625\\u063A\\u0644\\u0627\\u0642\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 flex-1 overflow-y-auto flex flex-col gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-4 gap-3 mb-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-amber-100 border border-amber-200 rounded-lg px-4 py-3 text-center md:col-span-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-amber-700 mb-1\",\n              children: \"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0631\\u0635\\u064A\\u062F \\u0627\\u0644\\u0643\\u0644\\u064A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl font-bold text-amber-900\",\n              children: [wallets.cash + wallets.instapay + wallets.ecash, \" \\u062C\\u0646\\u064A\\u0647\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-sky-50 border border-sky-100 rounded-lg px-4 py-3 text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-sky-700 mb-1\",\n              children: \"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0639\\u0645\\u0644\\u064A\\u0627\\u062A \\u0627\\u0644\\u0645\\u0639\\u0644\\u0651\\u0642\\u0629\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xl font-semibold text-sky-900\",\n              children: pendingCount\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-emerald-50 border border-emerald-100 rounded-lg px-4 py-3 text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-emerald-700 mb-1\",\n              children: \"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0639\\u0645\\u0644\\u064A\\u0627\\u062A \\u0627\\u0644\\u0645\\u0624\\u0643\\u0651\\u064E\\u062F\\u0629\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xl font-semibold text-emerald-900\",\n              children: confirmedCount\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this), lastTransfer && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-purple-50 border border-purple-100 rounded-lg px-4 py-3 text-xs text-purple-800\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"font-semibold mb-1\",\n            children: \"\\u0622\\u062E\\u0631 \\u0639\\u0645\\u0644\\u064A\\u0629 \\u062A\\u062D\\u0648\\u064A\\u0644 \\u062A\\u0645\\u062A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col gap-0.5\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: lastTransfer.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-[11px] text-purple-600\",\n              children: [\"\\u0628\\u062A\\u0627\\u0631\\u064A\\u062E \", lastTransfer.tx_date, \" \\u2013 \\u062A\\u0645 \\u062A\\u0633\\u062C\\u064A\\u0644\\u0647\\u0627 \\u0641\\u064A \", lastTransfer.created_at ? new Date(lastTransfer.created_at).toLocaleString('ar-EG') : '']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-3 gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-amber-50 border border-amber-100 rounded-lg px-4 py-3 text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-amber-700 mb-1\",\n              children: \"\\u0631\\u0635\\u064A\\u062F \\u0627\\u0644\\u0646\\u0642\\u062F\\u064A (\\u062E\\u0632\\u0646\\u0629)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xl font-bold text-amber-900\",\n              children: [wallets.cash, \" \\u062C\\u0646\\u064A\\u0647\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-sky-50 border border-sky-100 rounded-lg px-4 py-3 text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-sky-700 mb-1\",\n              children: \"\\u0631\\u0635\\u064A\\u062F \\u0625\\u0646\\u0633\\u062A\\u0627\\u0628\\u0627\\u064A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xl font-bold text-sky-900\",\n              children: [wallets.instapay, \" \\u062C\\u0646\\u064A\\u0647\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-purple-50 border border-purple-100 rounded-lg px-4 py-3 text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-purple-700 mb-1\",\n              children: \"\\u0631\\u0635\\u064A\\u062F \\u0627\\u0644\\u0643\\u0627\\u0634 \\u0627\\u0644\\u0625\\u0644\\u0643\\u062A\\u0631\\u0648\\u0646\\u064A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xl font-bold text-purple-900\",\n              children: [wallets.ecash, \" \\u062C\\u0646\\u064A\\u0647\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2 border-t pt-3 flex flex-col gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm font-semibold text-amber-900 mb-1\",\n            children: \"\\u0639\\u0645\\u0644\\u064A\\u0629 \\u0639\\u0644\\u0649 \\u0627\\u0644\\u062E\\u0632\\u0646\\u0629 \\u0627\\u0644\\u0646\\u0642\\u062F\\u064A\\u0629 (\\u0625\\u064A\\u062F\\u0627\\u0639 / \\u0633\\u062D\\u0628)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"text-sm font-medium\",\n              children: \"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0639\\u0645\\u0644\\u064A\\u0629\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"border rounded px-3 py-2 text-sm\",\n              value: operation,\n              onChange: e => setOperation(e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"deposit\",\n                children: \"\\u0625\\u064A\\u062F\\u0627\\u0639 (+)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"withdraw\",\n                children: \"\\u0633\\u062D\\u0628 (\\u2212)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"text-sm font-medium\",\n              children: \"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              min: \"0\",\n              className: \"border rounded px-3 py-2 text-sm\",\n              value: amount,\n              onChange: e => setAmount(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"text-sm font-medium\",\n              children: \"\\u0627\\u0644\\u0648\\u0635\\u0641 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              rows: 3,\n              className: \"border rounded px-3 py-2 text-sm resize-none\",\n              value: description,\n              onChange: e => setDescription(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 11\n        }, this), canTransfer && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-3 border-t pt-3 flex flex-col gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm font-semibold text-purple-900\",\n              children: \"\\u062A\\u062D\\u0648\\u064A\\u0644 \\u0631\\u0635\\u064A\\u062F \\u0628\\u064A\\u0646 \\u0627\\u0644\\u0645\\u062D\\u0627\\u0641\\u0638 (\\u0645\\u062F\\u064A\\u0631 \\u0641\\u0642\\u0637)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-3 gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col gap-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"text-xs font-medium\",\n                children: \"\\u0645\\u0646 \\u0627\\u0644\\u0645\\u062D\\u0641\\u0638\\u0629\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                className: \"border rounded px-3 py-2 text-sm\",\n                value: transferFrom,\n                onChange: e => setTransferFrom(e.target.value),\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"cash\",\n                  children: \"\\u0646\\u0642\\u062F\\u064A (\\u062E\\u0632\\u0646\\u0629)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 311,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"instapay\",\n                  children: \"\\u0625\\u0646\\u0633\\u062A\\u0627\\u0628\\u0627\\u064A\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 312,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"ecash\",\n                  children: \"\\u0643\\u0627\\u0634 \\u0625\\u0644\\u0643\\u062A\\u0631\\u0648\\u0646\\u064A\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 313,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 306,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col gap-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"text-xs font-medium\",\n                children: \"\\u0625\\u0644\\u0649 \\u0627\\u0644\\u0645\\u062D\\u0641\\u0638\\u0629\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                className: \"border rounded px-3 py-2 text-sm\",\n                value: transferTo,\n                onChange: e => setTransferTo(e.target.value),\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"cash\",\n                  children: \"\\u0646\\u0642\\u062F\\u064A (\\u062E\\u0632\\u0646\\u0629)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 323,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"instapay\",\n                  children: \"\\u0625\\u0646\\u0633\\u062A\\u0627\\u0628\\u0627\\u064A\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 324,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"ecash\",\n                  children: \"\\u0643\\u0627\\u0634 \\u0625\\u0644\\u0643\\u062A\\u0631\\u0648\\u0646\\u064A\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 325,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col gap-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"text-xs font-medium\",\n                children: \"\\u0645\\u0628\\u0644\\u063A \\u0627\\u0644\\u062A\\u062D\\u0648\\u064A\\u0644\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 329,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                min: \"0\",\n                className: \"border rounded px-3 py-2 text-sm\",\n                value: transferAmount,\n                onChange: e => setTransferAmount(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col gap-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"text-xs font-medium\",\n              children: \"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0629 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A\\u0629)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              rows: 2,\n              className: \"border rounded px-3 py-2 text-sm resize-none\",\n              value: transferNote,\n              onChange: e => setTransferNote(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-end mt-1\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"px-4 py-2 rounded text-sm text-white bg-purple-600 hover:bg-purple-700 disabled:opacity-60\",\n              onClick: handleTransfer,\n              disabled: transferLoading,\n              children: transferLoading ? 'جارٍ تنفيذ التحويل...' : 'تنفيذ التحويل'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"px-4 py-3 border-t bg-gray-50 flex items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"px-3 py-2 border rounded text-sm\",\n          onClick: onClose,\n          children: \"\\u0625\\u0644\\u063A\\u0627\\u0621\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"px-4 py-2 rounded text-sm text-white bg-amber-600 hover:bg-amber-700 disabled:opacity-60\",\n          onClick: handleSubmit,\n          disabled: loading,\n          children: loading ? 'جارٍ الحفظ...' : 'حفظ عملية الخزنة'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 206,\n    columnNumber: 5\n  }, this);\n}\n_s(CashboxModal, \"bqBTIiQXbV7AzWtMlQ19CTdcMmM=\");\n_c = CashboxModal;\nvar _c;\n$RefreshReg$(_c, \"CashboxModal\");","map":{"version":3,"names":["React","useContext","useEffect","useState","supabase","AuthContext","isManager","jsxDEV","_jsxDEV","CashboxModal","onClose","onDone","_s","currentUser","balance","setBalance","operation","setOperation","amount","setAmount","description","setDescription","loading","setLoading","wallets","setWallets","cash","instapay","ecash","pendingCount","setPendingCount","confirmedCount","setConfirmedCount","lastTransfer","setLastTransfer","transferFrom","setTransferFrom","transferTo","setTransferTo","transferAmount","setTransferAmount","transferNote","setTransferNote","transferLoading","setTransferLoading","canTransfer","loadDashboard","data","walletTx","error","walletError","from","select","in","pending","confirmed","forEach","row","amt","Number","signed","direction","payment_method","status","lastTx","lastError","eq","order","ascending","limit","maybeSingle","code","e","console","handleSubmit","alert","categoryId","targetName","cats","length","id","_","payload","tx_date","Date","toISOString","slice","category_id","bank_account_id","source_type","reservation_id","created_by","insert","message","walletLabel","key","walletToPaymentMethod","handleTransfer","txDate","descBase","fullDesc","fromPm","toPm","common","rows","className","dir","children","fileName","_jsxFileName","lineNumber","columnNumber","type","onClick","created_at","toLocaleString","value","onChange","target","min","disabled","_c","$RefreshReg$"],"sources":["F:/kelany/src/components/CashboxModal.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\nimport { supabase } from '../supabaseClient';\r\nimport { AuthContext } from '../App.jsx';\r\nimport { isManager } from '../utils/permissions.js';\r\n\r\nexport default function CashboxModal({ onClose, onDone }) {\r\n  const currentUser = useContext(AuthContext);\r\n  const [balance, setBalance] = useState(0);\r\n  const [operation, setOperation] = useState('deposit'); // deposit | withdraw\r\n  const [amount, setAmount] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [wallets, setWallets] = useState({ cash: 0, instapay: 0, ecash: 0 });\r\n  const [pendingCount, setPendingCount] = useState(0);\r\n  const [confirmedCount, setConfirmedCount] = useState(0);\r\n  const [lastTransfer, setLastTransfer] = useState(null);\r\n  const [transferFrom, setTransferFrom] = useState('cash');\r\n  const [transferTo, setTransferTo] = useState('instapay');\r\n  const [transferAmount, setTransferAmount] = useState('');\r\n  const [transferNote, setTransferNote] = useState('');\r\n  const [transferLoading, setTransferLoading] = useState(false);\r\n\r\n  const canTransfer = isManager(currentUser);\r\n\r\n  const loadDashboard = async () => {\r\n    try {\r\n      const { data: walletTx, error: walletError } = await supabase\r\n        .from('accounting_transactions')\r\n        .select('direction,amount,payment_method,status')\r\n        .in('payment_method', ['cash', 'instapay', 'vodafone_cash', 'etisalat_cash', 'other']);\r\n      if (walletError) throw walletError;\r\n\r\n      let cash = 0;\r\n      let instapay = 0;\r\n      let ecash = 0;\r\n      let pending = 0;\r\n      let confirmed = 0;\r\n\r\n      (walletTx || []).forEach((row) => {\r\n        const amt = Number(row.amount || 0);\r\n        if (!amt) return;\r\n        const signed = row.direction === 'income' ? amt : -amt;\r\n        if (row.payment_method === 'cash') cash += signed;\r\n        else if (row.payment_method === 'instapay') instapay += signed;\r\n        else ecash += signed;\r\n\r\n        if (row.status === 'pending') pending += 1;\r\n        else if (row.status === 'confirmed') confirmed += 1;\r\n      });\r\n\r\n      setWallets({ cash, instapay, ecash });\r\n      setBalance(cash);\r\n      setPendingCount(pending);\r\n      setConfirmedCount(confirmed);\r\n\r\n      const { data: lastTx, error: lastError } = await supabase\r\n        .from('accounting_transactions')\r\n        .select('id,tx_date,description,created_at')\r\n        .eq('source_type', 'transfer')\r\n        .order('created_at', { ascending: false })\r\n        .limit(1)\r\n        .maybeSingle();\r\n      if (lastError && lastError.code !== 'PGRST116') throw lastError;\r\n      setLastTransfer(lastTx || null);\r\n    } catch (e) {\r\n      console.error('load cashbox dashboard error', e);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadDashboard();\r\n  }, []);\r\n\r\n  const handleSubmit = async () => {\r\n    const amt = Number(amount || 0);\r\n    if (!amt || amt <= 0) {\r\n      alert('من فضلك أدخل مبلغًا صالحًا');\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      const direction = operation === 'deposit' ? 'income' : 'expense';\r\n      let categoryId = null;\r\n      try {\r\n        const targetName = direction === 'income' ? 'إيرادات أخرى' : 'مصروفات أخرى';\r\n        const { data: cats } = await supabase\r\n          .from('accounting_categories')\r\n          .select('id,name,type')\r\n          .eq('type', direction === 'income' ? 'income' : 'expense')\r\n          .eq('name', targetName)\r\n          .limit(1);\r\n        if (cats && cats.length > 0) {\r\n          categoryId = cats[0].id;\r\n        }\r\n      } catch (_) {}\r\n\r\n      const payload = {\r\n        tx_date: new Date().toISOString().slice(0, 10),\r\n        direction,\r\n        category_id: categoryId,\r\n        amount: amt,\r\n        payment_method: 'cash',\r\n        bank_account_id: null,\r\n        source_type: 'manual',\r\n        reservation_id: null,\r\n        description: description || (operation === 'deposit' ? 'عملية إيداع في الخزنة' : 'عملية سحب من الخزنة'),\r\n        status: 'confirmed',\r\n      };\r\n      if (currentUser && currentUser.id) {\r\n        payload.created_by = currentUser.id;\r\n      }\r\n\r\n      const { error } = await supabase.from('accounting_transactions').insert(payload);\r\n      if (error) throw error;\r\n      await loadDashboard();\r\n      onDone && onDone();\r\n    } catch (e) {\r\n      console.error('cashbox submit error', e);\r\n      alert('تعذر حفظ عملية الخزنة: ' + (e.message || e));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const walletLabel = (key) => {\r\n    if (key === 'cash') return 'نقدي (خزنة)';\r\n    if (key === 'instapay') return 'إنستاباي';\r\n    return 'كاش إلكتروني';\r\n  };\r\n\r\n  const walletToPaymentMethod = (key) => {\r\n    if (key === 'cash') return 'cash';\r\n    if (key === 'instapay') return 'instapay';\r\n    return 'other';\r\n  };\r\n\r\n  const handleTransfer = async () => {\r\n    const amt = Number(transferAmount || 0);\r\n    if (!canTransfer) {\r\n      alert('فقط المدير يمكنه تنفيذ تحويلات الأرصدة.');\r\n      return;\r\n    }\r\n    if (!amt || amt <= 0) {\r\n      alert('من فضلك أدخل مبلغ تحويل صالحاً');\r\n      return;\r\n    }\r\n    if (transferFrom === transferTo) {\r\n      alert('من فضلك اختر محفظتين مختلفتين (من / إلى).');\r\n      return;\r\n    }\r\n\r\n    setTransferLoading(true);\r\n    try {\r\n      const txDate = new Date().toISOString().slice(0, 10);\r\n      const descBase = `تحويل داخلي من ${walletLabel(transferFrom)} إلى ${walletLabel(transferTo)}`;\r\n      const fullDesc = transferNote ? `${descBase} - ${transferNote}` : descBase;\r\n\r\n      const fromPm = walletToPaymentMethod(transferFrom);\r\n      const toPm = walletToPaymentMethod(transferTo);\r\n\r\n      const common = {\r\n        tx_date: txDate,\r\n        category_id: null,\r\n        bank_account_id: null,\r\n        source_type: 'transfer',\r\n        reservation_id: null,\r\n        description: fullDesc,\r\n        status: 'confirmed',\r\n      };\r\n\r\n      if (currentUser && currentUser.id) {\r\n        common.created_by = currentUser.id;\r\n      }\r\n\r\n      const rows = [\r\n        {\r\n          ...common,\r\n          direction: 'expense',\r\n          amount: amt,\r\n          payment_method: fromPm,\r\n        },\r\n        {\r\n          ...common,\r\n          direction: 'income',\r\n          amount: amt,\r\n          payment_method: toPm,\r\n        },\r\n      ];\r\n\r\n      const { error } = await supabase.from('accounting_transactions').insert(rows);\r\n      if (error) throw error;\r\n\r\n      setTransferAmount('');\r\n      setTransferNote('');\r\n      await loadDashboard();\r\n      onDone && onDone();\r\n    } catch (e) {\r\n      console.error('wallet transfer error', e);\r\n      alert('تعذّر تنفيذ عملية التحويل: ' + (e.message || e));\r\n    } finally {\r\n      setTransferLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/40 flex items-center justify-center p-2 sm:p-4\" dir=\"rtl\">\r\n      <div className=\"bg-white w-full max-w-3xl max-h-[90vh] rounded-xl shadow-lg overflow-hidden flex flex-col\">\r\n        <div className=\"px-4 py-3 border-b bg-amber-50 flex items-center justify-between\">\r\n          <div>\r\n            <div className=\"font-bold text-amber-900\">إدارة الخزنة والمحافظ</div>\r\n            <div className=\"text-xs text-amber-700\">عرض أرصدة الكاش و Instapay والكاش الإلكتروني، وتسجيل إيداع/سحب وتحويلات داخلية</div>\r\n          </div>\r\n          <button type=\"button\" className=\"text-sm text-gray-500\" onClick={onClose}>إغلاق</button>\r\n        </div>\r\n\r\n        <div className=\"p-4 flex-1 overflow-y-auto flex flex-col gap-4\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-3 mb-1\">\r\n            <div className=\"bg-amber-100 border border-amber-200 rounded-lg px-4 py-3 text-center md:col-span-2\">\r\n              <div className=\"text-xs text-amber-700 mb-1\">إجمالي الرصيد الكلي</div>\r\n              <div className=\"text-2xl font-bold text-amber-900\">\r\n                {wallets.cash + wallets.instapay + wallets.ecash} جنيه\r\n              </div>\r\n            </div>\r\n            <div className=\"bg-sky-50 border border-sky-100 rounded-lg px-4 py-3 text-center\">\r\n              <div className=\"text-xs text-sky-700 mb-1\">عدد العمليات المعلّقة</div>\r\n              <div className=\"text-xl font-semibold text-sky-900\">{pendingCount}</div>\r\n            </div>\r\n            <div className=\"bg-emerald-50 border border-emerald-100 rounded-lg px-4 py-3 text-center\">\r\n              <div className=\"text-xs text-emerald-700 mb-1\">عدد العمليات المؤكَّدة</div>\r\n              <div className=\"text-xl font-semibold text-emerald-900\">{confirmedCount}</div>\r\n            </div>\r\n          </div>\r\n\r\n          {lastTransfer && (\r\n            <div className=\"bg-purple-50 border border-purple-100 rounded-lg px-4 py-3 text-xs text-purple-800\">\r\n              <div className=\"font-semibold mb-1\">آخر عملية تحويل تمت</div>\r\n              <div className=\"flex flex-col gap-0.5\">\r\n                <span>{lastTransfer.description}</span>\r\n                <span className=\"text-[11px] text-purple-600\">\r\n                  بتاريخ {lastTransfer.tx_date} – تم تسجيلها في {lastTransfer.created_at ? new Date(lastTransfer.created_at).toLocaleString('ar-EG') : ''}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\r\n            <div className=\"bg-amber-50 border border-amber-100 rounded-lg px-4 py-3 text-center\">\r\n              <div className=\"text-xs text-amber-700 mb-1\">رصيد النقدي (خزنة)</div>\r\n              <div className=\"text-xl font-bold text-amber-900\">{wallets.cash} جنيه</div>\r\n            </div>\r\n            <div className=\"bg-sky-50 border border-sky-100 rounded-lg px-4 py-3 text-center\">\r\n              <div className=\"text-xs text-sky-700 mb-1\">رصيد إنستاباي</div>\r\n              <div className=\"text-xl font-bold text-sky-900\">{wallets.instapay} جنيه</div>\r\n            </div>\r\n            <div className=\"bg-purple-50 border border-purple-100 rounded-lg px-4 py-3 text-center\">\r\n              <div className=\"text-xs text-purple-700 mb-1\">رصيد الكاش الإلكتروني</div>\r\n              <div className=\"text-xl font-bold text-purple-900\">{wallets.ecash} جنيه</div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"mt-2 border-t pt-3 flex flex-col gap-2\">\r\n            <div className=\"text-sm font-semibold text-amber-900 mb-1\">عملية على الخزنة النقدية (إيداع / سحب)</div>\r\n\r\n            <div className=\"flex flex-col gap-2\">\r\n              <label className=\"text-sm font-medium\">نوع العملية</label>\r\n              <select\r\n                className=\"border rounded px-3 py-2 text-sm\"\r\n                value={operation}\r\n                onChange={(e) => setOperation(e.target.value)}\r\n              >\r\n                <option value=\"deposit\">إيداع (+)</option>\r\n                <option value=\"withdraw\">سحب (−)</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"flex flex-col gap-2\">\r\n              <label className=\"text-sm font-medium\">المبلغ</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"0\"\r\n                className=\"border rounded px-3 py-2 text-sm\"\r\n                value={amount}\r\n                onChange={(e) => setAmount(e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"flex flex-col gap-2\">\r\n              <label className=\"text-sm font-medium\">الوصف (اختياري)</label>\r\n              <textarea\r\n                rows={3}\r\n                className=\"border rounded px-3 py-2 text-sm resize-none\"\r\n                value={description}\r\n                onChange={(e) => setDescription(e.target.value)}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {canTransfer && (\r\n            <div className=\"mt-3 border-t pt-3 flex flex-col gap-2\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"text-sm font-semibold text-purple-900\">تحويل رصيد بين المحافظ (مدير فقط)</div>\r\n              </div>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-2\">\r\n                <div className=\"flex flex-col gap-1\">\r\n                  <label className=\"text-xs font-medium\">من المحفظة</label>\r\n                  <select\r\n                    className=\"border rounded px-3 py-2 text-sm\"\r\n                    value={transferFrom}\r\n                    onChange={(e) => setTransferFrom(e.target.value)}\r\n                  >\r\n                    <option value=\"cash\">نقدي (خزنة)</option>\r\n                    <option value=\"instapay\">إنستاباي</option>\r\n                    <option value=\"ecash\">كاش إلكتروني</option>\r\n                  </select>\r\n                </div>\r\n                <div className=\"flex flex-col gap-1\">\r\n                  <label className=\"text-xs font-medium\">إلى المحفظة</label>\r\n                  <select\r\n                    className=\"border rounded px-3 py-2 text-sm\"\r\n                    value={transferTo}\r\n                    onChange={(e) => setTransferTo(e.target.value)}\r\n                  >\r\n                    <option value=\"cash\">نقدي (خزنة)</option>\r\n                    <option value=\"instapay\">إنستاباي</option>\r\n                    <option value=\"ecash\">كاش إلكتروني</option>\r\n                  </select>\r\n                </div>\r\n                <div className=\"flex flex-col gap-1\">\r\n                  <label className=\"text-xs font-medium\">مبلغ التحويل</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    className=\"border rounded px-3 py-2 text-sm\"\r\n                    value={transferAmount}\r\n                    onChange={(e) => setTransferAmount(e.target.value)}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"flex flex-col gap-1\">\r\n                <label className=\"text-xs font-medium\">ملاحظة (اختيارية)</label>\r\n                <textarea\r\n                  rows={2}\r\n                  className=\"border rounded px-3 py-2 text-sm resize-none\"\r\n                  value={transferNote}\r\n                  onChange={(e) => setTransferNote(e.target.value)}\r\n                />\r\n              </div>\r\n              <div className=\"flex justify-end mt-1\">\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"px-4 py-2 rounded text-sm text-white bg-purple-600 hover:bg-purple-700 disabled:opacity-60\"\r\n                  onClick={handleTransfer}\r\n                  disabled={transferLoading}\r\n                >\r\n                  {transferLoading ? 'جارٍ تنفيذ التحويل...' : 'تنفيذ التحويل'}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"px-4 py-3 border-t bg-gray-50 flex items-center justify-between\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"px-3 py-2 border rounded text-sm\"\r\n            onClick={onClose}\r\n          >\r\n            إلغاء\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            className=\"px-4 py-2 rounded text-sm text-white bg-amber-600 hover:bg-amber-700 disabled:opacity-60\"\r\n            onClick={handleSubmit}\r\n            disabled={loading}\r\n          >\r\n            {loading ? 'جارٍ الحفظ...' : 'حفظ عملية الخزنة'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}