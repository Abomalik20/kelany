{"ast":null,"code":"import _objectSpread from\"F:/kelany/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useMemo,useState}from'react';import{supabase}from'../supabaseClient';import GuestCard from'../components/GuestCard';import GuestModal from'../components/GuestModal';import GuestHistoryModal from'../components/GuestHistoryModal';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Guests(){const[rows,setRows]=useState([]);const[loading,setLoading]=useState(true);const[search,setSearch]=useState('');const[debounced,setDebounced]=useState('');const[page,setPage]=useState(0);const[pageSize,setPageSize]=useState(12);const[totalCount,setTotalCount]=useState(0);const[newCount,setNewCount]=useState(0);const[showModal,setShowModal]=useState(false);const[editing,setEditing]=useState(null);const[filters,setFilters]=useState({current:false,upcoming:false,vip:false,inactive:false});useEffect(()=>{const t=setTimeout(()=>setDebounced(search),350);return()=>clearTimeout(t);},[search]);const buildQuery=()=>{const q=supabase.from('guests_overview').select('*',{count:'exact'}).order('full_name',{ascending:true,nullsFirst:false});const term=(debounced||'').trim();if(term){q.or(\"full_name.ilike.%\".concat(term,\"%,phone.ilike.%\").concat(term,\"%,national_id.ilike.%\").concat(term,\"%,email.ilike.%\").concat(term,\"%\"));}if(filters.current)q.eq('has_current_stay',true);if(filters.upcoming)q.eq('has_upcoming_reservation',true);if(filters.vip)q.eq('is_vip',true);if(filters.inactive)q.eq('is_inactive',true);const from=page*pageSize;const to=from+pageSize-1;q.range(from,to);return q;};const load=async()=>{setLoading(true);try{const{data,error,count}=await buildQuery();if(error)throw error;setRows(data||[]);setTotalCount(count||0);}catch(e){console.error('Load guests failed',e);setRows([]);setTotalCount(0);}finally{setLoading(false);}};const loadNewCount=async()=>{try{const d=new Date();d.setHours(0,0,0,0);const todayIso=d.toISOString();const{error,count}=await supabase.from('guests').select('*',{count:'exact',head:true}).gte('created_at',todayIso);if(error)throw error;setNewCount(count||0);}catch(e){console.warn('Load new guests count failed',e);setNewCount(0);}};useEffect(()=>{load();},[debounced,filters,page,pageSize]);useEffect(()=>{loadNewCount();},[]);const counters=useMemo(()=>{const total=rows.length;const current=rows.filter(r=>r.has_current_stay).length;const upcoming=rows.filter(r=>r.has_upcoming_reservation).length;const vip=rows.filter(r=>r.is_vip).length;const inactive=rows.filter(r=>!r.has_current_stay&&!r.has_upcoming_reservation).length;return{total,current,upcoming,vip,inactive};},[rows]);const openCreate=()=>{setEditing(null);setShowModal(true);};const openEdit=row=>{setEditing(row);setShowModal(true);};const[showHistory,setShowHistory]=useState(false);const[historyGuest,setHistoryGuest]=useState(null);const openHistory=row=>{setHistoryGuest(row);setShowHistory(true);};const handleSave=async payload=>{try{// Duplicate detection by phone or national_id when creating\nif(!editing||!editing.id){const phoneVal=(payload.phone||'').trim();const nidVal=(payload.national_id||'').trim();if(phoneVal||nidVal){let orCond=[];if(phoneVal)orCond.push(\"phone.eq.\".concat(phoneVal));if(nidVal)orCond.push(\"national_id.eq.\".concat(nidVal));const{data:dup,error:dupErr}=await supabase.from('guests').select('id, full_name, phone, national_id, created_at').or(orCond.join(',')).limit(5);if(dupErr)throw dupErr;if(dup&&dup.length>0){const choice=window.confirm(\"\\u064A\\u0648\\u062C\\u062F \\u0646\\u0632\\u064A\\u0644 \\u0645\\u0633\\u062C\\u0644 \\u0628\\u0646\\u0641\\u0633 \\u0627\\u0644\\u0647\\u0627\\u062A\\u0641/\\u0627\\u0644\\u0647\\u0648\\u064A\\u0629:\\n\".concat(dup[0].full_name||'بدون اسم',\"\\n\\u062A\\u0627\\u0631\\u064A\\u062E: \").concat(dup[0].created_at?new Date(dup[0].created_at).toLocaleDateString('ar-EG'):'',\"\\n\\u0647\\u0644 \\u062A\\u0631\\u064A\\u062F \\u0641\\u062A\\u062D \\u0628\\u0637\\u0627\\u0642\\u0629 \\u0647\\u0630\\u0627 \\u0627\\u0644\\u0646\\u0632\\u064A\\u0644 \\u0628\\u062F\\u0644\\u0627\\u064B \\u0645\\u0646 \\u0625\\u0646\\u0634\\u0627\\u0621 \\u062C\\u062F\\u064A\\u062F\\u061F\"));if(choice){setEditing(dup[0]);// keep modal open with updated initialData\nreturn;}}}}const full_name=\"\".concat(String(payload.first_name||'').trim(),\" \").concat(String(payload.last_name||'').trim()).trim()||(payload.full_name||'').trim();const cleaned={first_name:(payload.first_name||'').trim()||null,last_name:(payload.last_name||'').trim()||null,full_name:full_name||null,avatar_url:(payload.avatar_url||'').trim()||null,id_doc_type:(payload.id_doc_type||'').trim()||null,id_doc_number:(payload.id_doc_number||'').trim()||null,id_doc_url:(payload.id_doc_url||'').trim()||null,id_doc_uploaded_at:payload.id_doc_url?payload.id_doc_uploaded_at||new Date().toISOString():null,email:(payload.email||'').trim()||null,phone:payload.phone||null,nationality:(payload.nationality||'').trim()||null,national_id:payload.national_id||null,address:(payload.address||'').trim()||null,city:(payload.city||'').trim()||null,country:(payload.country||'').trim()||null,is_vip:!!payload.is_vip,notes:(payload.notes||'').trim()||null};// Try saving with extended fields; if schema lacks columns, fallback to minimal payload\nconst saveMinimal=async()=>{const minimal={full_name:cleaned.full_name,phone:cleaned.phone,national_id:cleaned.national_id};if(editing&&editing.id){const{error:e2}=await supabase.from('guests').update(minimal).eq('id',editing.id);if(e2)throw e2;}else{const{error:e2}=await supabase.from('guests').insert([minimal]);if(e2)throw e2;}};if(editing&&editing.id){const{error}=await supabase.from('guests').update(cleaned).eq('id',editing.id);if(error){if(String(error.message||'').toLowerCase().includes('schema')||String(error.message||'').toLowerCase().includes('column')){await saveMinimal();}else{throw error;}}}else{const{error}=await supabase.from('guests').insert([cleaned]);if(error){if(String(error.message||'').toLowerCase().includes('schema')||String(error.message||'').toLowerCase().includes('column')){await saveMinimal();}else{throw error;}}}setShowModal(false);await load();await loadNewCount();}catch(e){console.error('Save guest failed',e);window.alert('تعذّر حفظ النزيل: '+(e.message||e));}};const handleDelete=async row=>{try{const confirmText=window.prompt('لتأكيد الحذف اكتب: ok','');if(!confirmText||String(confirmText).trim().toLowerCase()!=='ok')return;const{error}=await supabase.from('guests').delete().eq('id',row.id);if(error)throw error;await load();await loadNewCount();}catch(e){console.error('Delete guest failed',e);window.alert('تعذّر حذف النزيل: '+(e.message||e));}};const reset=()=>{setSearch('');setFilters({current:false,upcoming:false,vip:false,inactive:false});setPage(0);};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-8\",dir:\"rtl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold\",children:\"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0646\\u0632\\u0644\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"\\u0628\\u062D\\u062B\\u060C \\u0641\\u0644\\u0627\\u062A\\u0631\\u060C \\u0648\\u062A\\u0631\\u0642\\u064A\\u0645 \\u0645\\u0639 \\u0639\\u0631\\u0636 \\u0627\\u0644\\u0632\\u064A\\u0627\\u0631\\u0627\\u062A\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:openCreate,className:\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded\",children:\"\\u0646\\u0632\\u064A\\u0644 \\u062C\\u062F\\u064A\\u062F +\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-green-50 to-green-100 rounded border border-green-200 p-4 text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-2 text-sm text-green-700\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M5 12h14M5 12a7 7 0 0 1 14 0M12 19a7 7 0 0 0 7-7\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u062D\\u0627\\u0644\\u064A\\u0648\\u0646\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-green-700\",children:counters.current})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-amber-50 to-amber-100 rounded border border-amber-200 p-4 text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-2 text-sm text-amber-700\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M3 12h18M12 3v18\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0642\\u0627\\u062F\\u0650\\u0645\\u0648\\u0646\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-amber-700\",children:counters.upcoming})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-purple-50 to-purple-100 rounded border border-purple-200 p-4 text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-2 text-sm text-purple-700\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.46 4.73L5.82 21z\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"VIP\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-purple-700\",children:counters.vip})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-emerald-50 to-emerald-100 rounded border border-emerald-200 p-4 text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-2 text-sm text-emerald-700\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M5 12l5 5L20 7\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0646\\u0632\\u0644\\u0627\\u0621 \\u0627\\u0644\\u062C\\u062F\\u062F\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-emerald-700\",children:newCount})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-blue-50 to-blue-100 rounded border border-blue-200 p-4 text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-2 text-sm text-blue-700\",children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"w-4 h-4\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M3 12h18\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M7 12v8M17 12v8\"})]}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0646\\u0632\\u0644\\u0627\\u0621\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-blue-700\",children:totalCount})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap items-center gap-3 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex-1 min-w-[220px]\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\",children:/*#__PURE__*/_jsxs(\"svg\",{className:\"w-4 h-4\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"11\",cy:\"11\",r:\"7\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M21 21l-4.3-4.3\"})]})}),/*#__PURE__*/_jsx(\"input\",{className:\"border rounded pl-9 pr-3 py-2 w-full\",placeholder:\"\\u0628\\u062D\\u062B \\u0628\\u0627\\u0644\\u0627\\u0633\\u0645 \\u0623\\u0648 \\u0627\\u0644\\u0647\\u0627\\u062A\\u0641 \\u0623\\u0648 \\u0627\\u0644\\u0647\\u0648\\u064A\\u0629 \\u0623\\u0648 \\u0627\\u0644\\u0628\\u0631\\u064A\\u062F\",value:search,onChange:e=>{setSearch(e.target.value);setPage(0);}})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setFilters(s=>_objectSpread(_objectSpread({},s),{},{current:!s.current}));setPage(0);},className:\"px-3 py-2 rounded text-sm border \".concat(filters.current?'bg-green-600 text-white border-green-600':'bg-white text-gray-700 hover:bg-gray-50'),children:\"\\u062D\\u0627\\u0644\\u064A\\u0648\\u0646\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setFilters(s=>_objectSpread(_objectSpread({},s),{},{upcoming:!s.upcoming}));setPage(0);},className:\"px-3 py-2 rounded text-sm border \".concat(filters.upcoming?'bg-amber-600 text-white border-amber-600':'bg-white text-gray-700 hover:bg-gray-50'),children:\"\\u0642\\u0627\\u062F\\u0650\\u0645\\u0648\\u0646\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setFilters(s=>_objectSpread(_objectSpread({},s),{},{vip:!s.vip}));setPage(0);},className:\"px-3 py-2 rounded text-sm border \".concat(filters.vip?'bg-purple-600 text-white border-purple-600':'bg-white text-gray-700 hover:bg-gray-50'),children:\"VIP\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setFilters(s=>_objectSpread(_objectSpread({},s),{},{inactive:!s.inactive}));setPage(0);},className:\"px-3 py-2 rounded text-sm border \".concat(filters.inactive?'bg-gray-700 text-white border-gray-700':'bg-white text-gray-700 hover:bg-gray-50'),children:\"\\u063A\\u064A\\u0631 \\u0646\\u0634\\u0637\\u064A\\u0646\"}),/*#__PURE__*/_jsx(\"button\",{className:\"border rounded px-3 py-2 text-gray-700 hover:bg-gray-100\",onClick:reset,children:\"\\u0625\\u0639\\u0627\\u062F\\u0629 \\u0636\\u0628\\u0637\"})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6\",children:Array.from({length:6}).map((_,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md border border-gray-200 overflow-hidden animate-pulse\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-1 bg-gray-200\"}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 pt-4 h-6 bg-gray-100 mb-2\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 pb-4 space-y-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-4 bg-gray-100\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-4 bg-gray-100 w-2/3\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-4 bg-gray-100 w-1/2\"})]})]},i))}):rows.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 bg-white rounded shadow flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-semibold mb-1\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0646\\u062A\\u0627\\u0626\\u062C \\u0645\\u0637\\u0627\\u0628\\u0642\\u0629\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-600\",children:\"\\u062C\\u0631\\u0651\\u0628 \\u062A\\u0639\\u062F\\u064A\\u0644 \\u0639\\u0648\\u0627\\u0645\\u0644 \\u0627\\u0644\\u0628\\u062D\\u062B \\u0623\\u0648 \\u0623\\u0636\\u0641 \\u0646\\u0632\\u064A\\u0644\\u064B\\u0627 \\u062C\\u062F\\u064A\\u062F\\u064B\\u0627.\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:openCreate,className:\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded\",children:\"\\u0646\\u0632\\u064A\\u0644 \\u062C\\u062F\\u064A\\u062F\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6\",children:rows.map(r=>/*#__PURE__*/_jsx(GuestCard,{guest:r,onEdit:()=>openEdit(r),onDelete:()=>handleDelete(r),onHistory:()=>openHistory(r)},r.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mt-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[\"\\u0627\\u0644\\u0646\\u062A\\u0627\\u0626\\u062C: \",rows.length,\" / \\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A: \",totalCount]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"px-3 py-1 border rounded\",onClick:()=>setPage(p=>Math.max(0,p-1)),disabled:page===0,children:\"\\u0627\\u0644\\u0633\\u0627\\u0628\\u0642\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm\",children:[\"\\u0635\\u0641\\u062D\\u0629 \",page+1]}),/*#__PURE__*/_jsx(\"button\",{className:\"px-3 py-1 border rounded\",onClick:()=>setPage(p=>p+1),disabled:(page+1)*pageSize>=totalCount,children:\"\\u0627\\u0644\\u062A\\u0627\\u0644\\u064A\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"border rounded px-2 py-1\",value:pageSize,onChange:e=>{setPageSize(Number(e.target.value));setPage(0);},children:[/*#__PURE__*/_jsx(\"option\",{value:6,children:\"6\"}),/*#__PURE__*/_jsx(\"option\",{value:12,children:\"12\"}),/*#__PURE__*/_jsx(\"option\",{value:24,children:\"24\"})]})]})]}),showModal&&/*#__PURE__*/_jsx(GuestModal,{initialData:editing,onClose:()=>setShowModal(false),onSave:handleSave}),showHistory&&historyGuest&&/*#__PURE__*/_jsx(GuestHistoryModal,{guest:historyGuest,onClose:()=>{setShowHistory(false);setHistoryGuest(null);}})]});}","map":{"version":3,"names":["React","useEffect","useMemo","useState","supabase","GuestCard","GuestModal","GuestHistoryModal","jsx","_jsx","jsxs","_jsxs","Guests","rows","setRows","loading","setLoading","search","setSearch","debounced","setDebounced","page","setPage","pageSize","setPageSize","totalCount","setTotalCount","newCount","setNewCount","showModal","setShowModal","editing","setEditing","filters","setFilters","current","upcoming","vip","inactive","t","setTimeout","clearTimeout","buildQuery","q","from","select","count","order","ascending","nullsFirst","term","trim","or","concat","eq","to","range","load","data","error","e","console","loadNewCount","d","Date","setHours","todayIso","toISOString","head","gte","warn","counters","total","length","filter","r","has_current_stay","has_upcoming_reservation","is_vip","openCreate","openEdit","row","showHistory","setShowHistory","historyGuest","setHistoryGuest","openHistory","handleSave","payload","id","phoneVal","phone","nidVal","national_id","orCond","push","dup","dupErr","join","limit","choice","window","confirm","full_name","created_at","toLocaleDateString","String","first_name","last_name","cleaned","avatar_url","id_doc_type","id_doc_number","id_doc_url","id_doc_uploaded_at","email","nationality","address","city","country","notes","saveMinimal","minimal","e2","update","insert","message","toLowerCase","includes","alert","handleDelete","confirmText","prompt","delete","reset","className","dir","children","onClick","viewBox","fill","stroke","strokeWidth","cx","cy","placeholder","value","onChange","target","s","_objectSpread","Array","map","_","i","guest","onEdit","onDelete","onHistory","p","Math","max","disabled","Number","initialData","onClose","onSave"],"sources":["F:/kelany/src/pages/Guests.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\r\nimport { supabase } from '../supabaseClient';\r\nimport GuestCard from '../components/GuestCard';\r\nimport GuestModal from '../components/GuestModal';\r\nimport GuestHistoryModal from '../components/GuestHistoryModal';\r\n\r\nexport default function Guests() {\r\n  const [rows, setRows] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [search, setSearch] = useState('');\r\n  const [debounced, setDebounced] = useState('');\r\n  const [page, setPage] = useState(0);\r\n  const [pageSize, setPageSize] = useState(12);\r\n  const [totalCount, setTotalCount] = useState(0);\r\n  const [newCount, setNewCount] = useState(0);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [editing, setEditing] = useState(null);\r\n  const [filters, setFilters] = useState({ current: false, upcoming: false, vip: false, inactive: false });\r\n\r\n  useEffect(() => {\r\n    const t = setTimeout(() => setDebounced(search), 350);\r\n    return () => clearTimeout(t);\r\n  }, [search]);\r\n\r\n  const buildQuery = () => {\r\n    const q = supabase\r\n      .from('guests_overview')\r\n      .select('*', { count: 'exact' })\r\n      .order('full_name', { ascending: true, nullsFirst: false });\r\n\r\n    const term = (debounced || '').trim();\r\n    if (term) {\r\n      q.or(`full_name.ilike.%${term}%,phone.ilike.%${term}%,national_id.ilike.%${term}%,email.ilike.%${term}%`);\r\n    }\r\n    if (filters.current) q.eq('has_current_stay', true);\r\n    if (filters.upcoming) q.eq('has_upcoming_reservation', true);\r\n    if (filters.vip) q.eq('is_vip', true);\r\n    if (filters.inactive) q.eq('is_inactive', true);\r\n\r\n    const from = page * pageSize;\r\n    const to = from + pageSize - 1;\r\n    q.range(from, to);\r\n    return q;\r\n  };\r\n\r\n  const load = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const { data, error, count } = await buildQuery();\r\n      if (error) throw error;\r\n      setRows(data || []);\r\n      setTotalCount(count || 0);\r\n    } catch (e) {\r\n      console.error('Load guests failed', e);\r\n      setRows([]);\r\n      setTotalCount(0);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadNewCount = async () => {\r\n    try {\r\n      const d = new Date();\r\n      d.setHours(0,0,0,0);\r\n      const todayIso = d.toISOString();\r\n      const { error, count } = await supabase\r\n        .from('guests')\r\n        .select('*', { count: 'exact', head: true })\r\n        .gte('created_at', todayIso);\r\n      if (error) throw error;\r\n      setNewCount(count || 0);\r\n    } catch (e) {\r\n      console.warn('Load new guests count failed', e);\r\n      setNewCount(0);\r\n    }\r\n  };\r\n\r\n  useEffect(() => { load(); }, [debounced, filters, page, pageSize]);\r\n  useEffect(() => { loadNewCount(); }, []);\r\n\r\n  const counters = useMemo(() => {\r\n    const total = rows.length;\r\n    const current = rows.filter(r => r.has_current_stay).length;\r\n    const upcoming = rows.filter(r => r.has_upcoming_reservation).length;\r\n    const vip = rows.filter(r => r.is_vip).length;\r\n    const inactive = rows.filter(r => !r.has_current_stay && !r.has_upcoming_reservation).length;\r\n    return { total, current, upcoming, vip, inactive };\r\n  }, [rows]);\r\n\r\n  const openCreate = () => { setEditing(null); setShowModal(true); };\r\n  const openEdit = (row) => { setEditing(row); setShowModal(true); };\r\n  const [showHistory, setShowHistory] = useState(false);\r\n  const [historyGuest, setHistoryGuest] = useState(null);\r\n  const openHistory = (row) => { setHistoryGuest(row); setShowHistory(true); };\r\n\r\n  const handleSave = async (payload) => {\r\n    try {\r\n      // Duplicate detection by phone or national_id when creating\r\n      if (!editing || !editing.id) {\r\n        const phoneVal = (payload.phone || '').trim();\r\n        const nidVal = (payload.national_id || '').trim();\r\n        if (phoneVal || nidVal) {\r\n          let orCond = [];\r\n          if (phoneVal) orCond.push(`phone.eq.${phoneVal}`);\r\n          if (nidVal) orCond.push(`national_id.eq.${nidVal}`);\r\n          const { data: dup, error: dupErr } = await supabase\r\n            .from('guests')\r\n            .select('id, full_name, phone, national_id, created_at')\r\n            .or(orCond.join(','))\r\n            .limit(5);\r\n          if (dupErr) throw dupErr;\r\n          if (dup && dup.length > 0) {\r\n            const choice = window.confirm(`يوجد نزيل مسجل بنفس الهاتف/الهوية:\\n${dup[0].full_name || 'بدون اسم'}\\nتاريخ: ${dup[0].created_at ? new Date(dup[0].created_at).toLocaleDateString('ar-EG') : ''}\\nهل تريد فتح بطاقة هذا النزيل بدلاً من إنشاء جديد؟`);\r\n            if (choice) {\r\n              setEditing(dup[0]);\r\n              // keep modal open with updated initialData\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      const full_name = `${String(payload.first_name||'').trim()} ${String(payload.last_name||'').trim()}`.trim() || (payload.full_name || '').trim();\r\n      const cleaned = {\r\n        first_name: (payload.first_name || '').trim() || null,\r\n        last_name: (payload.last_name || '').trim() || null,\r\n        full_name: full_name || null,\r\n        avatar_url: (payload.avatar_url || '').trim() || null,\r\n        id_doc_type: (payload.id_doc_type || '').trim() || null,\r\n        id_doc_number: (payload.id_doc_number || '').trim() || null,\r\n        id_doc_url: (payload.id_doc_url || '').trim() || null,\r\n        id_doc_uploaded_at: payload.id_doc_url ? (payload.id_doc_uploaded_at || new Date().toISOString()) : null,\r\n        email: (payload.email || '').trim() || null,\r\n        phone: payload.phone || null,\r\n        nationality: (payload.nationality || '').trim() || null,\r\n        national_id: payload.national_id || null,\r\n        address: (payload.address || '').trim() || null,\r\n        city: (payload.city || '').trim() || null,\r\n        country: (payload.country || '').trim() || null,\r\n        is_vip: !!payload.is_vip,\r\n        notes: (payload.notes || '').trim() || null,\r\n      };\r\n      // Try saving with extended fields; if schema lacks columns, fallback to minimal payload\r\n      const saveMinimal = async () => {\r\n        const minimal = {\r\n          full_name: cleaned.full_name,\r\n          phone: cleaned.phone,\r\n          national_id: cleaned.national_id,\r\n        };\r\n        if (editing && editing.id) {\r\n          const { error: e2 } = await supabase.from('guests').update(minimal).eq('id', editing.id);\r\n          if (e2) throw e2;\r\n        } else {\r\n          const { error: e2 } = await supabase.from('guests').insert([minimal]);\r\n          if (e2) throw e2;\r\n        }\r\n      };\r\n\r\n      if (editing && editing.id) {\r\n        const { error } = await supabase.from('guests').update(cleaned).eq('id', editing.id);\r\n        if (error) {\r\n          if (String(error.message || '').toLowerCase().includes('schema') || String(error.message || '').toLowerCase().includes('column')) {\r\n            await saveMinimal();\r\n          } else {\r\n            throw error;\r\n          }\r\n        }\r\n      } else {\r\n        const { error } = await supabase.from('guests').insert([cleaned]);\r\n        if (error) {\r\n          if (String(error.message || '').toLowerCase().includes('schema') || String(error.message || '').toLowerCase().includes('column')) {\r\n            await saveMinimal();\r\n          } else {\r\n            throw error;\r\n          }\r\n        }\r\n      }\r\n      setShowModal(false);\r\n      await load();\r\n      await loadNewCount();\r\n    } catch (e) {\r\n      console.error('Save guest failed', e);\r\n      window.alert('تعذّر حفظ النزيل: ' + (e.message || e));\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (row) => {\r\n    try {\r\n      const confirmText = window.prompt('لتأكيد الحذف اكتب: ok', '');\r\n      if (!confirmText || String(confirmText).trim().toLowerCase() !== 'ok') return;\r\n      const { error } = await supabase.from('guests').delete().eq('id', row.id);\r\n      if (error) throw error;\r\n      await load();\r\n      await loadNewCount();\r\n    } catch (e) {\r\n      console.error('Delete guest failed', e);\r\n      window.alert('تعذّر حذف النزيل: ' + (e.message || e));\r\n    }\r\n  };\r\n\r\n  const reset = () => { setSearch(''); setFilters({ current: false, upcoming: false, vip: false, inactive: false }); setPage(0); };\r\n\r\n  return (\r\n    <div className=\"p-8\" dir=\"rtl\">\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold\">إدارة النزلاء</h2>\r\n          <p className=\"text-sm text-gray-500\">بحث، فلاتر، وترقيم مع عرض الزيارات</p>\r\n        </div>\r\n        <button onClick={openCreate} className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded\">نزيل جديد +</button>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6\">\r\n        <div className=\"bg-gradient-to-br from-green-50 to-green-100 rounded border border-green-200 p-4 text-center\">\r\n          <div className=\"flex items-center justify-center gap-2 text-sm text-green-700\">\r\n            <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"><path d=\"M5 12h14M5 12a7 7 0 0 1 14 0M12 19a7 7 0 0 0 7-7\"/></svg>\r\n            <span>حاليون</span>\r\n          </div>\r\n          <div className=\"text-2xl font-bold text-green-700\">{counters.current}</div>\r\n        </div>\r\n        <div className=\"bg-gradient-to-br from-amber-50 to-amber-100 rounded border border-amber-200 p-4 text-center\">\r\n          <div className=\"flex items-center justify-center gap-2 text-sm text-amber-700\">\r\n            <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"><path d=\"M3 12h18M12 3v18\"/></svg>\r\n            <span>قادِمون</span>\r\n          </div>\r\n          <div className=\"text-2xl font-bold text-amber-700\">{counters.upcoming}</div>\r\n        </div>\r\n        <div className=\"bg-gradient-to-br from-purple-50 to-purple-100 rounded border border-purple-200 p-4 text-center\">\r\n          <div className=\"flex items-center justify-center gap-2 text-sm text-purple-700\">\r\n            <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.46 4.73L5.82 21z\"/></svg>\r\n            <span>VIP</span>\r\n          </div>\r\n          <div className=\"text-2xl font-bold text-purple-700\">{counters.vip}</div>\r\n        </div>\r\n        <div className=\"bg-gradient-to-br from-emerald-50 to-emerald-100 rounded border border-emerald-200 p-4 text-center\">\r\n          <div className=\"flex items-center justify-center gap-2 text-sm text-emerald-700\">\r\n            <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"><path d=\"M5 12l5 5L20 7\"/></svg>\r\n            <span>نزلاء الجدد</span>\r\n          </div>\r\n          <div className=\"text-2xl font-bold text-emerald-700\">{newCount}</div>\r\n        </div>\r\n        <div className=\"bg-gradient-to-br from-blue-50 to-blue-100 rounded border border-blue-200 p-4 text-center\">\r\n          <div className=\"flex items-center justify-center gap-2 text-sm text-blue-700\">\r\n            <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"><path d=\"M3 12h18\"/><path d=\"M7 12v8M17 12v8\"/></svg>\r\n            <span>إجمالي النزلاء</span>\r\n          </div>\r\n          <div className=\"text-2xl font-bold text-blue-700\">{totalCount}</div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex flex-wrap items-center gap-3 mb-4\">\r\n        <div className=\"relative flex-1 min-w-[220px]\">\r\n          <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\">\r\n            <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"><circle cx=\"11\" cy=\"11\" r=\"7\"/><path d=\"M21 21l-4.3-4.3\"/></svg>\r\n          </span>\r\n          <input className=\"border rounded pl-9 pr-3 py-2 w-full\" placeholder=\"بحث بالاسم أو الهاتف أو الهوية أو البريد\" value={search} onChange={e=>{ setSearch(e.target.value); setPage(0); }} />\r\n        </div>\r\n        <button onClick={()=>{ setFilters(s=>({ ...s, current: !s.current })); setPage(0); }}\r\n          className={`px-3 py-2 rounded text-sm border ${filters.current ? 'bg-green-600 text-white border-green-600' : 'bg-white text-gray-700 hover:bg-gray-50'}`}>حاليون</button>\r\n        <button onClick={()=>{ setFilters(s=>({ ...s, upcoming: !s.upcoming })); setPage(0); }}\r\n          className={`px-3 py-2 rounded text-sm border ${filters.upcoming ? 'bg-amber-600 text-white border-amber-600' : 'bg-white text-gray-700 hover:bg-gray-50'}`}>قادِمون</button>\r\n        <button onClick={()=>{ setFilters(s=>({ ...s, vip: !s.vip })); setPage(0); }}\r\n          className={`px-3 py-2 rounded text-sm border ${filters.vip ? 'bg-purple-600 text-white border-purple-600' : 'bg-white text-gray-700 hover:bg-gray-50'}`}>VIP</button>\r\n        <button onClick={()=>{ setFilters(s=>({ ...s, inactive: !s.inactive })); setPage(0); }}\r\n          className={`px-3 py-2 rounded text-sm border ${filters.inactive ? 'bg-gray-700 text-white border-gray-700' : 'bg-white text-gray-700 hover:bg-gray-50'}`}>غير نشطين</button>\r\n        <button className=\"border rounded px-3 py-2 text-gray-700 hover:bg-gray-100\" onClick={reset}>إعادة ضبط</button>\r\n      </div>\r\n\r\n      {loading ? (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6\">\r\n          {Array.from({ length: 6 }).map((_, i) => (\r\n            <div key={i} className=\"bg-white rounded-lg shadow-md border border-gray-200 overflow-hidden animate-pulse\">\r\n              <div className=\"h-1 bg-gray-200\" />\r\n              <div className=\"px-4 pt-4 h-6 bg-gray-100 mb-2\" />\r\n              <div className=\"px-4 pb-4 space-y-2\">\r\n                <div className=\"h-4 bg-gray-100\" />\r\n                <div className=\"h-4 bg-gray-100 w-2/3\" />\r\n                <div className=\"h-4 bg-gray-100 w-1/2\" />\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ) : rows.length === 0 ? (\r\n        <div className=\"p-6 bg-white rounded shadow flex items-center justify-between\">\r\n          <div>\r\n            <div className=\"text-lg font-semibold mb-1\">لا توجد نتائج مطابقة</div>\r\n            <div className=\"text-gray-600\">جرّب تعديل عوامل البحث أو أضف نزيلًا جديدًا.</div>\r\n          </div>\r\n          <button onClick={openCreate} className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded\">نزيل جديد</button>\r\n        </div>\r\n      ) : (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6\">\r\n          {rows.map(r => (\r\n            <GuestCard key={r.id} guest={r} onEdit={()=>openEdit(r)} onDelete={()=>handleDelete(r)} onHistory={()=>openHistory(r)} />\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"flex items-center justify-between mt-6\">\r\n        <div className=\"text-sm text-gray-600\">النتائج: {rows.length} / الإجمالي: {totalCount}</div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <button className=\"px-3 py-1 border rounded\" onClick={()=>setPage(p=>Math.max(0,p-1))} disabled={page===0}>السابق</button>\r\n          <span className=\"text-sm\">صفحة {page+1}</span>\r\n          <button className=\"px-3 py-1 border rounded\" onClick={()=>setPage(p=>p+1)} disabled={(page+1)*pageSize>=totalCount}>التالي</button>\r\n          <select className=\"border rounded px-2 py-1\" value={pageSize} onChange={e=>{ setPageSize(Number(e.target.value)); setPage(0); }}>\r\n            <option value={6}>6</option>\r\n            <option value={12}>12</option>\r\n            <option value={24}>24</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      {showModal && (\r\n        <GuestModal\r\n          initialData={editing}\r\n          onClose={()=>setShowModal(false)}\r\n          onSave={handleSave}\r\n        />\r\n      )}\r\n      {showHistory && historyGuest && (\r\n        <GuestHistoryModal\r\n          guest={historyGuest}\r\n          onClose={()=>{ setShowHistory(false); setHistoryGuest(null); }}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}