{"ast":null,"code":"import _objectSpread from\"F:/kelany/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{supabase}from'../supabaseClient';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function GuestModal(_ref){let{initialData,onClose,onSave}=_ref;const deriveFromFullName=full=>{const parts=String(full||'').trim().split(/\\s+/);if(parts.length===0)return{first:'',last:''};if(parts.length===1)return{first:parts[0],last:''};return{first:parts[0],last:parts.slice(1).join(' ')};};const initialNames=(()=>{const fn=(initialData===null||initialData===void 0?void 0:initialData.first_name)||'';const ln=(initialData===null||initialData===void 0?void 0:initialData.last_name)||'';if(fn.trim().length+ln.trim().length===0&&initialData!==null&&initialData!==void 0&&initialData.full_name){return deriveFromFullName(initialData.full_name);}return{first:fn,last:ln};})();const[first_name,setFirstName]=useState(initialNames.first||'');const[last_name,setLastName]=useState(initialNames.last||'');const[email,setEmail]=useState((initialData===null||initialData===void 0?void 0:initialData.email)||'');const[phone,setPhone]=useState((initialData===null||initialData===void 0?void 0:initialData.phone)||'');const[nationality,setNationality]=useState((initialData===null||initialData===void 0?void 0:initialData.nationality)||'');const[national_id,setNationalId]=useState((initialData===null||initialData===void 0?void 0:initialData.national_id)||'');const[address,setAddress]=useState((initialData===null||initialData===void 0?void 0:initialData.address)||'');const[city,setCity]=useState((initialData===null||initialData===void 0?void 0:initialData.city)||'');const[country,setCountry]=useState((initialData===null||initialData===void 0?void 0:initialData.country)||'');const[is_vip,setIsVip]=useState(!!(initialData!==null&&initialData!==void 0&&initialData.is_vip));const[avatar_url,setAvatarUrl]=useState((initialData===null||initialData===void 0?void 0:initialData.avatar_url)||'');const[id_doc_type,setIdDocType]=useState((initialData===null||initialData===void 0?void 0:initialData.id_doc_type)||'national_id');const[id_doc_number,setIdDocNumber]=useState((initialData===null||initialData===void 0?void 0:initialData.id_doc_number)||'');const[id_doc_url,setIdDocUrl]=useState((initialData===null||initialData===void 0?void 0:initialData.id_doc_url)||'');const[id_doc_uploaded_at,setIdDocUploadedAt]=useState((initialData===null||initialData===void 0?void 0:initialData.id_doc_uploaded_at)||null);const[idUploading,setIdUploading]=useState(false);const[notes,setNotes]=useState((initialData===null||initialData===void 0?void 0:initialData.notes)||'');const[saving,setSaving]=useState(false);const[errors,setErrors]=useState({});// Sync when initialData changes (e.g., selecting an existing duplicate)\nReact.useEffect(()=>{const fn=(initialData===null||initialData===void 0?void 0:initialData.first_name)||'';const ln=(initialData===null||initialData===void 0?void 0:initialData.last_name)||'';let names={first:fn,last:ln};if(fn.trim().length+ln.trim().length===0&&initialData!==null&&initialData!==void 0&&initialData.full_name){names=deriveFromFullName(initialData.full_name);}setFirstName(names.first||'');setLastName(names.last||'');setEmail((initialData===null||initialData===void 0?void 0:initialData.email)||'');setPhone((initialData===null||initialData===void 0?void 0:initialData.phone)||'');setNationality((initialData===null||initialData===void 0?void 0:initialData.nationality)||'');setNationalId((initialData===null||initialData===void 0?void 0:initialData.national_id)||'');setAddress((initialData===null||initialData===void 0?void 0:initialData.address)||'');setCity((initialData===null||initialData===void 0?void 0:initialData.city)||'');setCountry((initialData===null||initialData===void 0?void 0:initialData.country)||'');setIsVip(!!(initialData!==null&&initialData!==void 0&&initialData.is_vip));setAvatarUrl((initialData===null||initialData===void 0?void 0:initialData.avatar_url)||'');setIdDocType((initialData===null||initialData===void 0?void 0:initialData.id_doc_type)||'national_id');setIdDocNumber((initialData===null||initialData===void 0?void 0:initialData.id_doc_number)||'');setIdDocUrl((initialData===null||initialData===void 0?void 0:initialData.id_doc_url)||'');setIdDocUploadedAt((initialData===null||initialData===void 0?void 0:initialData.id_doc_uploaded_at)||null);setNotes((initialData===null||initialData===void 0?void 0:initialData.notes)||'');setErrors({});},[initialData]);const validate=()=>{const e={};const hasFull=String(first_name).trim().length+String(last_name).trim().length>0;const full_name=\"\".concat(String(first_name||'').trim(),\" \").concat(String(last_name||'').trim()).trim();if(!hasFull&&full_name.length===0)e.full_name='اكتب الاسم الأول والأخير أو الاسم الكامل.';setErrors(e);return Object.keys(e).length===0;};const handleSubmit=async e=>{e.preventDefault();if(!validate())return;setSaving(true);try{await onSave({first_name,last_name,avatar_url,id_doc_type,id_doc_number,id_doc_url,id_doc_uploaded_at,email,phone,nationality,national_id,address,city,country,is_vip,notes});}finally{setSaving(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50\",dir:\"rtl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-xl w-full max-w-lg sm:max-w-xl md:max-w-2xl lg:max-w-3xl max-h-[90vh] flex flex-col\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b sticky top-0 bg-white z-10\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold\",children:initialData?'تعديل بيانات النزيل':'إضافة نزيل جديد'})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"px-6 py-4 flex-1 overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm\",children:\"\\u0627\\u0644\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0623\\u0648\\u0644 *\"}),/*#__PURE__*/_jsx(\"input\",{className:\"mt-1 border rounded w-full px-3 py-2\",value:first_name,onChange:e=>{setFirstName(e.target.value);setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{full_name:undefined}));},placeholder:\"\\u0623\\u062D\\u0645\\u062F\"}),errors.full_name&&/*#__PURE__*/_jsx(\"div\",{className:\"text-red-600 text-xs mt-1\",children:errors.full_name})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm\",children:\"\\u0627\\u0644\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0623\\u062E\\u064A\\u0631 *\"}),/*#__PURE__*/_jsx(\"input\",{className:\"mt-1 border rounded w-full px-3 py-2\",value:last_name,onChange:e=>{setLastName(e.target.value);setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{full_name:undefined}));},placeholder:\"\\u0645\\u062D\\u0645\\u062F\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm\",children:\"\\u0631\\u0627\\u0628\\u0637 \\u0627\\u0644\\u0635\\u0648\\u0631\\u0629 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"}),/*#__PURE__*/_jsx(\"input\",{className:\"mt-1 border rounded w-full px-3 py-2\",value:avatar_url,onChange:e=>setAvatarUrl(e.target.value),placeholder:\"https://.../avatar.jpg\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm\",children:\"\\u0627\\u0644\\u0628\\u0631\\u064A\\u062F \\u0627\\u0644\\u0625\\u0644\\u0643\\u062A\\u0631\\u0648\\u0646\\u064A\"}),/*#__PURE__*/_jsx(\"input\",{className:\"mt-1 border rounded w-full px-3 py-2\",value:email,onChange:e=>setEmail(e.target.value),placeholder:\"name@example.com\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-2 border-t pt-4 mt-2\",children:/*#__PURE__*/_jsxs(\"details\",{className:\"group\",children:[/*#__PURE__*/_jsxs(\"summary\",{className:\"font-semibold text-sm cursor-pointer list-none flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u0647\\u0648\\u064A\\u0629 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500 group-open:hidden\",children:\"\\u0625\\u0638\\u0647\\u0627\\u0631\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500 hidden group-open:inline\",children:\"\\u0625\\u062E\\u0641\\u0627\\u0621\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 grid grid-cols-1 md:grid-cols-3 gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm\",children:\"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0647\\u0648\\u064A\\u0629\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"mt-1 border rounded w-full px-3 py-2\",value:id_doc_type,onChange:e=>setIdDocType(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"national_id\",children:\"\\u0628\\u0637\\u0627\\u0642\\u0629 \\u0634\\u062E\\u0635\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"option\",{value:\"passport\",children:\"\\u062C\\u0648\\u0627\\u0632 \\u0633\\u0641\\u0631\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm\",children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0647\\u0648\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{className:\"mt-1 border rounded w-full px-3 py-2\",value:id_doc_number,onChange:e=>setIdDocNumber(e.target.value),placeholder:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u062C\\u0648\\u0627\\u0632/\\u0627\\u0644\\u0628\\u0637\\u0627\\u0642\\u0629\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm\",children:\"\\u0631\\u0641\\u0639 \\u0635\\u0648\\u0631\\u0629 \\u0627\\u0644\\u0647\\u0648\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*,application/pdf\",className:\"mt-1 w-full\",onChange:async e=>{const file=e.target.files&&e.target.files[0];if(!file)return;try{setIdUploading(true);const safeName=\"\".concat(Date.now(),\"_\").concat(file.name.replace(/\\s+/g,'_'));const{error:upErr}=await supabase.storage.from('guest-ids').upload(safeName,file,{upsert:true,contentType:file.type});if(upErr)throw upErr;const{data:pub}=supabase.storage.from('guest-ids').getPublicUrl(safeName);if(pub!==null&&pub!==void 0&&pub.publicUrl){setIdDocUrl(pub.publicUrl);setIdDocUploadedAt(new Date().toISOString());}}catch(err){console.error('Upload ID failed',err);alert('تعذّر رفع الهوية. تأكد من صلاحيات Storage ثم حاول مجددًا.');}finally{setIdUploading(false);}}}),idUploading&&/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 mt-1\",children:\"\\u062C\\u0627\\u0631\\u064D \\u0627\\u0644\\u0631\\u0641\\u0639...\"}),id_doc_url&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs mt-1\",children:[/*#__PURE__*/_jsx(\"a\",{href:id_doc_url,target:\"_blank\",rel:\"noreferrer\",className:\"text-blue-600 hover:underline\",children:\"\\u0639\\u0631\\u0636 \\u0627\\u0644\\u0647\\u0648\\u064A\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0641\\u0648\\u0639\\u0629\"}),id_doc_uploaded_at&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-500 ml-2\",children:[\"(\\u0645\\u0631\\u0641\\u0648\\u0639\\u0629: \",new Date(id_doc_uploaded_at).toLocaleDateString('ar-EG'),\")\"]})]})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm\",children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0647\\u0627\\u062A\\u0641 *\"}),/*#__PURE__*/_jsx(\"input\",{className:\"mt-1 border rounded w-full px-3 py-2\",value:phone,onChange:e=>setPhone(e.target.value),placeholder:\"01234567890\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm\",children:\"\\u0627\\u0644\\u062C\\u0646\\u0633\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{className:\"mt-1 border rounded w-full px-3 py-2\",value:nationality,onChange:e=>setNationality(e.target.value),placeholder:\"\\u0645\\u0635\\u0631\\u064A\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm\",children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0647\\u0648\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{className:\"mt-1 border rounded w-full px-3 py-2\",value:national_id,onChange:e=>setNationalId(e.target.value),placeholder:\"29901011234567\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm\",children:\"\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646\"}),/*#__PURE__*/_jsx(\"input\",{className:\"mt-1 border rounded w-full px-3 py-2\",value:address,onChange:e=>setAddress(e.target.value),placeholder:\"\\u0627\\u0644\\u0642\\u0627\\u0647\\u0631\\u0629 - \\u0645\\u0635\\u0631 \\u0627\\u0644\\u062C\\u062F\\u064A\\u062F\\u0629\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm\",children:\"\\u0627\\u0644\\u0645\\u062F\\u064A\\u0646\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{className:\"mt-1 border rounded w-full px-3 py-2\",value:city,onChange:e=>setCity(e.target.value),placeholder:\"\\u0627\\u0644\\u0642\\u0627\\u0647\\u0631\\u0629\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm\",children:\"\\u0627\\u0644\\u062F\\u0648\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{className:\"mt-1 border rounded w-full px-3 py-2\",value:country,onChange:e=>setCountry(e.target.value),placeholder:\"\\u0645\\u0635\\u0631\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:is_vip,onChange:e=>setIsVip(e.target.checked)}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:\"\\u0646\\u0632\\u064A\\u0644 VIP \\u2B50\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm\",children:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"mt-1 border rounded w-full px-3 py-2\",rows:3,value:notes,onChange:e=>setNotes(e.target.value),placeholder:\"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A \\u0625\\u0636\\u0627\\u0641\\u064A\\u0629...\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"sticky bottom-0 -mx-6 px-6 pt-3 mt-6 bg-white border-t flex justify-end gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:saving,className:\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded\",children:saving?'جارٍ الحفظ...':'حفظ التعديلات'})]})]})]})});}","map":{"version":3,"names":["React","useState","supabase","jsx","_jsx","jsxs","_jsxs","GuestModal","_ref","initialData","onClose","onSave","deriveFromFullName","full","parts","String","trim","split","length","first","last","slice","join","initialNames","fn","first_name","ln","last_name","full_name","setFirstName","setLastName","email","setEmail","phone","setPhone","nationality","setNationality","national_id","setNationalId","address","setAddress","city","setCity","country","setCountry","is_vip","setIsVip","avatar_url","setAvatarUrl","id_doc_type","setIdDocType","id_doc_number","setIdDocNumber","id_doc_url","setIdDocUrl","id_doc_uploaded_at","setIdDocUploadedAt","idUploading","setIdUploading","notes","setNotes","saving","setSaving","errors","setErrors","useEffect","names","validate","e","hasFull","concat","Object","keys","handleSubmit","preventDefault","className","dir","children","onSubmit","value","onChange","target","prev","_objectSpread","undefined","placeholder","type","accept","file","files","safeName","Date","now","name","replace","error","upErr","storage","from","upload","upsert","contentType","data","pub","getPublicUrl","publicUrl","toISOString","err","console","alert","href","rel","toLocaleDateString","checked","rows","onClick","disabled"],"sources":["F:/kelany/src/components/GuestModal.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { supabase } from '../supabaseClient';\r\n\r\nexport default function GuestModal({ initialData, onClose, onSave }) {\r\n  const deriveFromFullName = (full) => {\r\n    const parts = String(full || '').trim().split(/\\s+/);\r\n    if (parts.length === 0) return { first: '', last: '' };\r\n    if (parts.length === 1) return { first: parts[0], last: '' };\r\n    return { first: parts[0], last: parts.slice(1).join(' ') };\r\n  };\r\n\r\n  const initialNames = (() => {\r\n    const fn = initialData?.first_name || '';\r\n    const ln = initialData?.last_name || '';\r\n    if ((fn.trim().length + ln.trim().length) === 0 && initialData?.full_name) {\r\n      return deriveFromFullName(initialData.full_name);\r\n    }\r\n    return { first: fn, last: ln };\r\n  })();\r\n\r\n  const [first_name, setFirstName] = useState(initialNames.first || '');\r\n  const [last_name, setLastName] = useState(initialNames.last || '');\r\n  const [email, setEmail] = useState(initialData?.email || '');\r\n  const [phone, setPhone] = useState(initialData?.phone || '');\r\n  const [nationality, setNationality] = useState(initialData?.nationality || '');\r\n  const [national_id, setNationalId] = useState(initialData?.national_id || '');\r\n  const [address, setAddress] = useState(initialData?.address || '');\r\n  const [city, setCity] = useState(initialData?.city || '');\r\n  const [country, setCountry] = useState(initialData?.country || '');\r\n  const [is_vip, setIsVip] = useState(!!initialData?.is_vip);\r\n  const [avatar_url, setAvatarUrl] = useState(initialData?.avatar_url || '');\r\n  const [id_doc_type, setIdDocType] = useState(initialData?.id_doc_type || 'national_id');\r\n  const [id_doc_number, setIdDocNumber] = useState(initialData?.id_doc_number || '');\r\n  const [id_doc_url, setIdDocUrl] = useState(initialData?.id_doc_url || '');\r\n  const [id_doc_uploaded_at, setIdDocUploadedAt] = useState(initialData?.id_doc_uploaded_at || null);\r\n  const [idUploading, setIdUploading] = useState(false);\r\n  const [notes, setNotes] = useState(initialData?.notes || '');\r\n  const [saving, setSaving] = useState(false);\r\n  const [errors, setErrors] = useState({});\r\n\r\n  // Sync when initialData changes (e.g., selecting an existing duplicate)\r\n  React.useEffect(() => {\r\n    const fn = initialData?.first_name || '';\r\n    const ln = initialData?.last_name || '';\r\n    let names = { first: fn, last: ln };\r\n    if ((fn.trim().length + ln.trim().length) === 0 && initialData?.full_name) {\r\n      names = deriveFromFullName(initialData.full_name);\r\n    }\r\n    setFirstName(names.first || '');\r\n    setLastName(names.last || '');\r\n    setEmail(initialData?.email || '');\r\n    setPhone(initialData?.phone || '');\r\n    setNationality(initialData?.nationality || '');\r\n    setNationalId(initialData?.national_id || '');\r\n    setAddress(initialData?.address || '');\r\n    setCity(initialData?.city || '');\r\n    setCountry(initialData?.country || '');\r\n    setIsVip(!!initialData?.is_vip);\r\n    setAvatarUrl(initialData?.avatar_url || '');\r\n    setIdDocType(initialData?.id_doc_type || 'national_id');\r\n    setIdDocNumber(initialData?.id_doc_number || '');\r\n    setIdDocUrl(initialData?.id_doc_url || '');\r\n    setIdDocUploadedAt(initialData?.id_doc_uploaded_at || null);\r\n    setNotes(initialData?.notes || '');\r\n    setErrors({});\r\n  }, [initialData]);\r\n\r\n  const validate = () => {\r\n    const e = {};\r\n    const hasFull = (String(first_name).trim().length + String(last_name).trim().length) > 0;\r\n    const full_name = `${String(first_name||'').trim()} ${String(last_name||'').trim()}`.trim();\r\n    if (!hasFull && full_name.length === 0) e.full_name = 'اكتب الاسم الأول والأخير أو الاسم الكامل.';\r\n    setErrors(e);\r\n    return Object.keys(e).length === 0;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!validate()) return;\r\n    setSaving(true);\r\n    try {\r\n      await onSave({\r\n        first_name,\r\n        last_name,\r\n        avatar_url,\r\n        id_doc_type,\r\n        id_doc_number,\r\n        id_doc_url,\r\n        id_doc_uploaded_at,\r\n        email,\r\n        phone,\r\n        nationality,\r\n        national_id,\r\n        address,\r\n        city,\r\n        country,\r\n        is_vip,\r\n        notes,\r\n      });\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50\" dir=\"rtl\">\r\n      <div className=\"bg-white rounded-lg shadow-xl w-full max-w-lg sm:max-w-xl md:max-w-2xl lg:max-w-3xl max-h-[90vh] flex flex-col\">\r\n        <div className=\"px-6 py-4 border-b sticky top-0 bg-white z-10\">\r\n          <h3 className=\"text-xl font-bold\">{initialData ? 'تعديل بيانات النزيل' : 'إضافة نزيل جديد'}</h3>\r\n        </div>\r\n        <form onSubmit={handleSubmit} className=\"px-6 py-4 flex-1 overflow-y-auto\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div>\r\n              <label className=\"text-sm\">الاسم الأول *</label>\r\n              <input className=\"mt-1 border rounded w-full px-3 py-2\" value={first_name} onChange={e=>{ setFirstName(e.target.value); setErrors(prev=>({ ...prev, full_name: undefined })); }} placeholder=\"أحمد\" />\r\n              {errors.full_name && <div className=\"text-red-600 text-xs mt-1\">{errors.full_name}</div>}\r\n            </div>\r\n            <div>\r\n              <label className=\"text-sm\">الاسم الأخير *</label>\r\n              <input className=\"mt-1 border rounded w-full px-3 py-2\" value={last_name} onChange={e=>{ setLastName(e.target.value); setErrors(prev=>({ ...prev, full_name: undefined })); }} placeholder=\"محمد\" />\r\n            </div>\r\n            <div>\r\n                <label className=\"text-sm\">رابط الصورة (اختياري)</label>\r\n                <input className=\"mt-1 border rounded w-full px-3 py-2\" value={avatar_url} onChange={e=>setAvatarUrl(e.target.value)} placeholder=\"https://.../avatar.jpg\" />\r\n              </div>\r\n              <div>\r\n              <label className=\"text-sm\">البريد الإلكتروني</label>\r\n              <input className=\"mt-1 border rounded w-full px-3 py-2\" value={email} onChange={e=>setEmail(e.target.value)} placeholder=\"name@example.com\" />\r\n            </div>\r\n              <div className=\"md:col-span-2 border-t pt-4 mt-2\">\r\n                <details className=\"group\">\r\n                  <summary className=\"font-semibold text-sm cursor-pointer list-none flex items-center justify-between\">\r\n                    <span>هوية العميل</span>\r\n                    <span className=\"text-xs text-gray-500 group-open:hidden\">إظهار</span>\r\n                    <span className=\"text-xs text-gray-500 hidden group-open:inline\">إخفاء</span>\r\n                  </summary>\r\n                  <div className=\"mt-3 grid grid-cols-1 md:grid-cols-3 gap-3\">\r\n                  <div>\r\n                    <label className=\"text-sm\">نوع الهوية</label>\r\n                    <select className=\"mt-1 border rounded w-full px-3 py-2\" value={id_doc_type} onChange={e=>setIdDocType(e.target.value)}>\r\n                      <option value=\"national_id\">بطاقة شخصية</option>\r\n                      <option value=\"passport\">جواز سفر</option>\r\n                    </select>\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"text-sm\">رقم الهوية</label>\r\n                    <input className=\"mt-1 border rounded w-full px-3 py-2\" value={id_doc_number} onChange={e=>setIdDocNumber(e.target.value)} placeholder=\"رقم الجواز/البطاقة\" />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"text-sm\">رفع صورة الهوية</label>\r\n                    <input type=\"file\" accept=\"image/*,application/pdf\" className=\"mt-1 w-full\" onChange={async (e)=>{\r\n                      const file = e.target.files && e.target.files[0];\r\n                      if (!file) return;\r\n                      try {\r\n                        setIdUploading(true);\r\n                        const safeName = `${Date.now()}_${file.name.replace(/\\s+/g,'_')}`;\r\n                        const { error: upErr } = await supabase.storage.from('guest-ids').upload(safeName, file, { upsert: true, contentType: file.type });\r\n                        if (upErr) throw upErr;\r\n                        const { data: pub } = supabase.storage.from('guest-ids').getPublicUrl(safeName);\r\n                        if (pub?.publicUrl) {\r\n                          setIdDocUrl(pub.publicUrl);\r\n                          setIdDocUploadedAt(new Date().toISOString());\r\n                        }\r\n                      } catch (err) {\r\n                        console.error('Upload ID failed', err);\r\n                        alert('تعذّر رفع الهوية. تأكد من صلاحيات Storage ثم حاول مجددًا.');\r\n                      } finally {\r\n                        setIdUploading(false);\r\n                      }\r\n                    }} />\r\n                    {idUploading && <div className=\"text-xs text-gray-500 mt-1\">جارٍ الرفع...</div>}\r\n                    {id_doc_url && (\r\n                      <div className=\"text-xs mt-1\">\r\n                        <a href={id_doc_url} target=\"_blank\" rel=\"noreferrer\" className=\"text-blue-600 hover:underline\">عرض الهوية المرفوعة</a>\r\n                        {id_doc_uploaded_at && <span className=\"text-gray-500 ml-2\">(مرفوعة: {new Date(id_doc_uploaded_at).toLocaleDateString('ar-EG')})</span>}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  </div>\r\n                </details>\r\n              </div>\r\n            <div>\r\n              <label className=\"text-sm\">رقم الهاتف *</label>\r\n              <input className=\"mt-1 border rounded w-full px-3 py-2\" value={phone} onChange={e=>setPhone(e.target.value)} placeholder=\"01234567890\" />\r\n            </div>\r\n            <div>\r\n              <label className=\"text-sm\">الجنسية</label>\r\n              <input className=\"mt-1 border rounded w-full px-3 py-2\" value={nationality} onChange={e=>setNationality(e.target.value)} placeholder=\"مصري\" />\r\n            </div>\r\n            <div>\r\n              <label className=\"text-sm\">رقم الهوية</label>\r\n              <input className=\"mt-1 border rounded w-full px-3 py-2\" value={national_id} onChange={e=>setNationalId(e.target.value)} placeholder=\"29901011234567\" />\r\n            </div>\r\n            <div className=\"md:col-span-2\">\r\n              <label className=\"text-sm\">العنوان</label>\r\n              <input className=\"mt-1 border rounded w-full px-3 py-2\" value={address} onChange={e=>setAddress(e.target.value)} placeholder=\"القاهرة - مصر الجديدة\" />\r\n            </div>\r\n            <div>\r\n              <label className=\"text-sm\">المدينة</label>\r\n              <input className=\"mt-1 border rounded w-full px-3 py-2\" value={city} onChange={e=>setCity(e.target.value)} placeholder=\"القاهرة\" />\r\n            </div>\r\n            <div>\r\n              <label className=\"text-sm\">الدولة</label>\r\n              <input className=\"mt-1 border rounded w-full px-3 py-2\" value={country} onChange={e=>setCountry(e.target.value)} placeholder=\"مصر\" />\r\n            </div>\r\n            <div className=\"md:col-span-2 flex items-center gap-2\">\r\n              <input type=\"checkbox\" checked={is_vip} onChange={e=>setIsVip(e.target.checked)} />\r\n              <span className=\"text-sm\">نزيل VIP ⭐</span>\r\n            </div>\r\n            <div className=\"md:col-span-2\">\r\n              <label className=\"text-sm\">ملاحظات</label>\r\n              <textarea className=\"mt-1 border rounded w-full px-3 py-2\" rows={3} value={notes} onChange={e=>setNotes(e.target.value)} placeholder=\"ملاحظات إضافية...\" />\r\n            </div>\r\n          </div>\r\n          <div className=\"sticky bottom-0 -mx-6 px-6 pt-3 mt-6 bg-white border-t flex justify-end gap-3\">\r\n            <button type=\"button\" onClick={onClose} className=\"bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded\">إلغاء</button>\r\n            <button type=\"submit\" disabled={saving} className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded\">{saving ? 'جارٍ الحفظ...' : 'حفظ التعديلات'}</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}